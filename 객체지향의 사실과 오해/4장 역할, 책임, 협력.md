# 4장 역할, 책임, 협력

작성자: 수찬 이

> 객체의 모양을 빚는 것은 객체가 참여하는 협력이다.
어떤 협력에 참여하는지가 객체에 필요한 행동을 결정하고, 필요한 행동이 객체의 상태를 결정한다.
개별적인 객체의 행동이나 상태가 아니라 객체들 간의 협력에 집중하라
> 

<br>

### ✅협력

- 객체 지향의 시각에서 가장 중요한 것은 객체의 행동이다. 하지만 객체는 스스로 행동을 시작하지 않으며 다른 객체의 요청과 그에 대한 응답으로 행동이 이루어 진다.
- 즉 객체는 혼자서 고립된 섬이 아니라 여러 객체들이 서로 상호작용하는 **협력체**, **협력 시스템**인 것이다.
- 요청과 응답을 통한 객체들간의 상호작용

<br>

### ✅책임

- 객체지향의 세계에서는 어떤 객체가 어떤 요청에 대해 대답해 줄 수 있거나, 적절한 행동을 할 의무가 있는 경우 해당 객체가 책임을 가진다고 말한다.
- 객체가 다른 객체에게 주어진 책임을 수행하도록 요청을 보내는 것을 **메시지 전송이라고 한다.**
    - 메시지를 전송함으로써 협렵을 요청하는 객체를 송신자라고 하고 메시지를 받아 요청을 처리하는 객체를 **수신자**라고 한다.
- 책임과 메시지의 수준이 같지 않다.
    - 책임은 객체가 협력에 참여하기 위해 수행해야 하는 행위를 상위 수준에서 개략적으로 서술한 것이다.
    - 책임을 결정한 후 실제로 협력을 정제하면서 이를 메시지로 변환할 때는 하나의 책임이 여러 메시지로 분할되는 것이 일반적이다.
- 객체지향 설계는 협력에 참여하기 위해 어떤 객체가 어떤 책임을 수행해야 하고 어떤 객체로부터 메시지를 수신할 것인지를 결정하는 것으로부터 시작된다.

<br>

### ✅역할

- 역할은 재사용 가능하고 유연한 객체지향 설계를 낳는 매우 중요한 구성요소
- 역할은 협력 내에서 다른 객체로 대체할 수 있음을 나타내는 일종의 표식이다.
- 역할을 대체할 수 있는 객체는 동일한 메시지를 이해할 수 있는 객체로 한정된다.
- 메시지가 책임을 의미한다.
    - 동일한 역할을 수행할 수 있다는 것은 해당 객체들이 협력 내에서 동일한 책임의 집합을 수행할 수 있다는 것 의미
    - 동일한 역할을 수행하는 객체들이 동일한 메시지를 수신할 수 있기 때문에 동일한 책임을 수행할 수 있다는 것은 중요한 개념
- 다양한 객체들이 협력에 참여할 수 있기 때문에 협력이 좀 더 유연해지며 다양한 객체들이 동일한 협력에 참여할 수 있기 때문에 재사용성이 높아진다.
- 역할은 협력 안에서 구체적인 객체로 대체될 수 있는 추상적인 협력자이다.

<br>

### ✅대체 가능성

- 본질적으로 역할은 다른 객체에 의해 대체 가능함을 의미한다.
- 객체가 역할을 대체 가능하기 위해서는 협력 안에서 역할이 수행하는 모든 책임을 동일하게 수행할 수 있어야 한다.
- 객체의 타입과 역할 사이에는 일반화/특수화 관계가 성립하는 것이 일반적이다.
- 일반화/특수화 관점에서 좀 더 일반적인 개념을 의미하는 역할은 일반화이며 좀 더 구체적인 개념을 의미하는 객체의 타입은 특수화이다.
- 역할의 대체 가능성은 행위 호환성을 의미하고, 행위 호환성은 동일한 책임의 수행을 의미한다.

<br>

### ✅역할,책임,협력을 고려하는 객체지향 설계 기법

<br>

**시스템의 책임을 이해하고 쪼개기 - 책임주도 설계** **책임-주도 설계**란 사용자의 메시지에 대한 시스템의 책임을 명확히 파악하고, 이 책임을 잘게 분할해가며 적절한 객체 혹은 역할에게 할당해나가는 **분할정복과 비슷한** 설계 방식이다.

**테스트 주도 개발**

- 테스트를 먼저 작성한 후 해당 테스트를 통과하도록 코드를 작성하며 개발하는 방식을 말한다.
- 이름과 다르게 테스트가 중요한게 아니다. 역할, 책임, 협력이 적합한지를 피드백으로 얻는게 중요하고 테스트는 덤일 뿐이다.
- 테스트-주도 개발은 다양한 설계 경험과 객체지향에 대한 깊이 있는 지식이 없다면 효과적이지 못하다. 그래서 역할, 책임, 협력에 집중하고 객체지향의 원칙을 적용하려는 깊이 있는 고민과 노력을 통해서만 테스트-주도 개발의 혜택을 누릴 수 있다.

**디자인 패턴**

- 디자인 패턴은 책임-주도 설계의 결과를 표현한다.
- 반복적으로 발생하는 문제에 대한 솔루션이며 객체의 역할,책임,협력을 고안한 객체 지향적 설계 패턴이므로 사용자는 해당 패턴이 해결하련느 문제가 무엇인지 명확히 파악하고, 패턴을 사용하면 왜 더 효과적인지 알아야 한다.
- 디자인 패턴을 통해 책임-주도 설계의 절차를 순차적으로 거치지 않고도 빠르게 좋은 객체지향 설계 산출이 가능해진다!